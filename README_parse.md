# Парсер и анализатор цен на диваны с divan.ru

## Описание
Проект состоит из двух скриптов:
1. **parse_divan.py** - парсинг цен на диваны с сайта https://www.divan.ru/category/divany с использованием библиотеки Selenium
2. **analyze_prices.py** - анализ полученных данных: вычисление средней цены и построение гистограммы распределения цен

## Установка зависимостей

1. Установите необходимые библиотеки:
```bash
pip install -r requirements.txt
```

2. Установите ChromeDriver:
   - Скачайте ChromeDriver с https://chromedriver.chromium.org/
   - Или установите через менеджер пакетов:
     - macOS: `brew install chromedriver`
     - Linux: `sudo apt-get install chromium-chromedriver`
     - Windows: скачайте и добавьте в PATH

## Использование

### 1. Парсинг цен на диваны

Запустите скрипт парсинга:
```bash
python parse_divan.py
```

Результаты будут сохранены в файл `divan_prices.csv`.

### 2. Анализ полученных данных

После получения данных из CSV файла, запустите скрипт анализа:
```bash
python analyze_prices.py
```

Скрипт выполнит следующие действия:
- Вычислит статистику по ценам (средняя, минимальная, максимальная, медианная цена, стандартное отклонение)
- Построит гистограмму распределения цен
- Сохранит гистограмму в файл `divan_prices_histogram.png`
- Отобразит график на экране

## Структура CSV файла

Файл `divan_prices.csv` содержит следующие колонки:
- **Цена** - цена со скидкой в рублях (только цифры, без пробелов)

Примечание: скрипт извлекает только цены со скидкой (текущие цены), исключая зачеркнутые старые цены.

## Структура проекта

```
DZ_AZ03/
├── parse_divan.py              # Скрипт парсинга цен
├── analyze_prices.py           # Скрипт анализа данных
├── divan_prices.csv            # CSV файл с ценами (создается после парсинга)
├── divan_prices_histogram.png  # Гистограмма цен (создается после анализа)
├── requirements.txt            # Зависимости проекта
└── README_parse.md             # Документация
```

## Примечания

### Парсинг (parse_divan.py)
- Скрипт работает в headless режиме (без открытия окна браузера)
- Если парсинг не работает, попробуйте убрать `--headless` из опций Chrome для отладки (закомментировать строку 16)
- Скрипт ограничен парсингом первых 50 товаров для примера (можно изменить в коде, строка 75)
- Извлекаются только цены со скидкой (текущие цены)

### Анализ данных (analyze_prices.py)
- Требует наличия файла `divan_prices.csv` в той же директории
- Автоматически обрабатывает некорректные данные (пропускает невалидные значения)
- Выводит подробную статистику в консоль
- Сохраняет гистограмму в высоком разрешении (300 DPI)

## Зависимости

Все необходимые библиотеки указаны в `requirements.txt`:
- selenium - для парсинга веб-страниц
- pandas - для работы с CSV данными
- matplotlib - для построения графиков
- numpy - используется pandas для вычислений

